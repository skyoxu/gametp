2025-10-10T16:40:12.4944256Z Prepare all required actions
2025-10-10T16:40:12.5005972Z ##[group]Run ./.github/actions/run-tests
2025-10-10T16:40:12.5006210Z with:
2025-10-10T16:40:12.5006376Z   test-type: observability
2025-10-10T16:40:12.5006570Z   timeout: 300000
2025-10-10T16:40:12.5006727Z   fail-fast: true
2025-10-10T16:40:12.5006878Z   reporter: default
2025-10-10T16:40:12.5007034Z env:
2025-10-10T16:40:12.5007179Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T16:40:12.5007390Z   COVERAGE_THRESHOLD: 90
2025-10-10T16:40:12.5007568Z   SENTRY_DSN: 
2025-10-10T16:40:12.5007726Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T16:40:12.5007910Z   CL: /std:c++20 /EHsc
2025-10-10T16:40:12.5008084Z   CXXFLAGS: -std=c++20
2025-10-10T16:40:12.5008249Z ##[endgroup]
2025-10-10T16:40:12.5139975Z ##[group]Run node scripts/ci/run-tests.mjs --test-type "observability" --timeout "300000" --fail-fast "true" --reporter "default" --output-file ""
2025-10-10T16:40:12.5140837Z [36;1mnode scripts/ci/run-tests.mjs --test-type "observability" --timeout "300000" --fail-fast "true" --reporter "default" --output-file ""[0m
2025-10-10T16:40:12.5202537Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-10-10T16:40:12.5202855Z env:
2025-10-10T16:40:12.5203030Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T16:40:12.5203255Z   COVERAGE_THRESHOLD: 90
2025-10-10T16:40:12.5203445Z   SENTRY_DSN: 
2025-10-10T16:40:12.5203621Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T16:40:12.5203818Z   CL: /std:c++20 /EHsc
2025-10-10T16:40:12.5203999Z   CXXFLAGS: -std=c++20
2025-10-10T16:40:12.5204177Z ##[endgroup]
2025-10-10T16:40:12.8134636Z [run-tests] Start type=observability
2025-10-10T16:40:12.8138715Z [run-tests] Timeout=300000ms, FailFast=true, Reporter=default
2025-10-10T16:40:12.8140776Z [run-tests] Executing: npm run observability:test
2025-10-10T16:40:13.2722917Z 
2025-10-10T16:40:13.2723500Z > gametp@0.1.0 observability:test
2025-10-10T16:40:13.2726364Z > node scripts/verify-observability.js
2025-10-10T16:40:13.2726761Z 
2025-10-10T16:40:13.2727463Z 🔍 开始可观测性系统验证...
2025-10-10T16:40:13.2727928Z 📁 验证文件结构...
2025-10-10T16:40:13.2728368Z ⚙️ 验证配置文件...
2025-10-10T16:40:13.2728787Z 🌍 验证环境变量...
2025-10-10T16:40:13.2729173Z 📦 验证依赖...
2025-10-10T16:40:13.2729947Z 🔧 验证基础功能...
2025-10-10T16:40:13.2730370Z 🔒 验证安全配置...
2025-10-10T16:40:13.2730558Z 
2025-10-10T16:40:13.2730773Z 📊 === 可观测性系统验证结果 ===
2025-10-10T16:40:13.2731684Z 🕐 验证时间: 2025-10-10T16:40:13.236Z
2025-10-10T16:40:13.2732480Z 📈 总分: 85/100 (B级)
2025-10-10T16:40:13.2732883Z ✅ 成功: 23/27
2025-10-10T16:40:13.2733235Z ❌ 失败: 4/27
2025-10-10T16:40:13.2733760Z 🎯 结果: 通过
2025-10-10T16:40:13.2733926Z 
2025-10-10T16:40:13.2734151Z 📋 检查详情:
2025-10-10T16:40:13.2734678Z   ✅ 必需文件: src/shared/observability/sentry-main.ts
2025-10-10T16:40:13.2735430Z   ✅ 必需文件: src/shared/observability/sentry-renderer.ts
2025-10-10T16:40:13.2736144Z   ✅ 必需文件: src/shared/observability/sentry-detector.ts
2025-10-10T16:40:13.2739094Z   ✅ 必需文件: src/shared/observability/sentry-main-detector.ts
2025-10-10T16:40:13.2742360Z   ✅ 必需文件: src/shared/observability/config-validator.ts
2025-10-10T16:40:13.2742919Z   ✅ 必需文件: src/shared/observability/logging-health-checker.ts
2025-10-10T16:40:13.2743380Z   ✅ 必需文件: src/shared/observability/observability-gatekeeper.ts
2025-10-10T16:40:13.2743804Z   ✅ 必需文件: src/shared/observability/resilience-manager.ts
2025-10-10T16:40:13.2744171Z   ✅ 必需目录: src/shared/observability
2025-10-10T16:40:13.2744418Z   ✅ 必需目录: logs
2025-10-10T16:40:13.2744627Z   ✅ 必需目录: .github/workflows
2025-10-10T16:40:13.2744879Z   ✅ package.json Sentry依赖
2025-10-10T16:40:13.2745117Z   ✅ package.json 测试脚本
2025-10-10T16:40:13.2745329Z   ✅ TypeScript配置
2025-10-10T16:40:13.2745547Z   ❌ .env.example 配置
2025-10-10T16:40:13.2745785Z      错误: 缺少必要的环境变量模板
2025-10-10T16:40:13.2746240Z   ❌ 环境变量: NODE_ENV
2025-10-10T16:40:13.2746488Z      错误: 必需的环境变量未设置
2025-10-10T16:40:13.2746678Z   ❌ 可选环境变量覆盖率
2025-10-10T16:40:13.2746898Z      错误: 建议设置更多可选环境变量
2025-10-10T16:40:13.2747101Z   ✅ node_modules 安装
2025-10-10T16:40:13.2749923Z   ✅ 依赖: @sentry/electron
2025-10-10T16:40:13.2750337Z   ✅ 依赖: @sentry/node
2025-10-10T16:40:13.2750708Z   ✅ 依赖: @sentry/browser
2025-10-10T16:40:13.2751090Z   ✅ 依赖: typescript
2025-10-10T16:40:13.2751704Z   ✅ JSON序列化/反序列化
2025-10-10T16:40:13.2751970Z   ✅ 文件系统读写
2025-10-10T16:40:13.2752184Z   ✅ 内存使用检查
2025-10-10T16:40:13.2752365Z   ✅ .gitignore 安全配置
2025-10-10T16:40:13.2752578Z   ❌ 硬编码密钥检查
2025-10-10T16:40:13.2752784Z      错误: 发现可疑的硬编码密钥: 2处
2025-10-10T16:40:13.2752899Z 
2025-10-10T16:40:13.2752993Z 💡 建议:
2025-10-10T16:40:13.2753225Z   ✅ 可观测性系统基本正常，建议优化剩余问题
2025-10-10T16:40:13.2753448Z   📋 请优先修复以下错误:
2025-10-10T16:40:13.2753711Z      - .env.example 配置: 缺少必要的环境变量模板
2025-10-10T16:40:13.2754006Z      - 环境变量: NODE_ENV: 必需的环境变量未设置
2025-10-10T16:40:13.2754309Z      - 可选环境变量覆盖率: 建议设置更多可选环境变量
2025-10-10T16:40:13.2754556Z      - 硬编码密钥检查: 发现可疑的硬编码密钥: 2处
2025-10-10T16:40:13.2754799Z ==================================================
2025-10-10T16:40:13.2754966Z 
2025-10-10T16:40:13.2755264Z 📄 验证结果已保存到: D:\a\gametp\gametp\logs\observability-verification.json
2025-10-10T16:40:13.2755592Z [run-tests] Completed: PASS
2025-10-10T16:40:13.4017397Z ##[group]Run if ('success' -eq 'success') {
2025-10-10T16:40:13.4017698Z [36;1mif ('success' -eq 'success') {[0m
2025-10-10T16:40:13.4018364Z [36;1m  Write-Host '[tests] Status: PASS'[0m
2025-10-10T16:40:13.4018631Z [36;1m} else {[0m
2025-10-10T16:40:13.4018805Z [36;1m  Write-Host '[tests] Status: FAIL'[0m
2025-10-10T16:40:13.4019018Z [36;1m}[0m
2025-10-10T16:40:13.4019170Z [36;1mif ('' -ne '') {[0m
2025-10-10T16:40:13.4019376Z [36;1m  Write-Host "[tests] Report path: "[0m
2025-10-10T16:40:13.4019597Z [36;1m}[0m
2025-10-10T16:40:13.4080140Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-10-10T16:40:13.4080479Z env:
2025-10-10T16:40:13.4080641Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T16:40:13.4080865Z   COVERAGE_THRESHOLD: 90
2025-10-10T16:40:13.4081049Z   SENTRY_DSN: 
2025-10-10T16:40:13.4081235Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T16:40:13.4081426Z   CL: /std:c++20 /EHsc
2025-10-10T16:40:13.4081603Z   CXXFLAGS: -std=c++20
2025-10-10T16:40:13.4081781Z ##[endgroup]
2025-10-10T16:40:13.7133017Z [tests] Status: PASS
