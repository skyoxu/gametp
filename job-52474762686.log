2025-10-10T17:59:49.4642075Z Current runner version: '2.328.0'
2025-10-10T17:59:49.4665178Z ##[group]Runner Image Provisioner
2025-10-10T17:59:49.4665874Z Hosted Compute Agent
2025-10-10T17:59:49.4666387Z Version: 20250912.392
2025-10-10T17:59:49.4666883Z Commit: d921fda672a98b64f4f82364647e2f10b2267d0b
2025-10-10T17:59:49.4667534Z Build Date: 2025-09-12T15:23:14Z
2025-10-10T17:59:49.4668097Z ##[endgroup]
2025-10-10T17:59:49.4668521Z ##[group]Operating System
2025-10-10T17:59:49.4669037Z Microsoft Windows Server 2025
2025-10-10T17:59:49.4669518Z 10.0.26100
2025-10-10T17:59:49.4669942Z Datacenter
2025-10-10T17:59:49.4670325Z ##[endgroup]
2025-10-10T17:59:49.4671103Z ##[group]Runner Image
2025-10-10T17:59:49.4671681Z Image: windows-2025
2025-10-10T17:59:49.4672129Z Version: 20250929.44.1
2025-10-10T17:59:49.4673055Z Included Software: https://github.com/actions/runner-images/blob/win25/20250929.44/images/windows/Windows2025-Readme.md
2025-10-10T17:59:49.4674622Z Image Release: https://github.com/actions/runner-images/releases/tag/win25%2F20250929.44
2025-10-10T17:59:49.4675477Z ##[endgroup]
2025-10-10T17:59:49.4676428Z ##[group]GITHUB_TOKEN Permissions
2025-10-10T17:59:49.4678122Z Actions: read
2025-10-10T17:59:49.4678638Z Contents: read
2025-10-10T17:59:49.4679040Z Metadata: read
2025-10-10T17:59:49.4679560Z ##[endgroup]
2025-10-10T17:59:49.4682012Z Secret source: Actions
2025-10-10T17:59:49.4682641Z Prepare workflow directory
2025-10-10T17:59:49.5198397Z Prepare all required actions
2025-10-10T17:59:49.5253473Z Getting action download info
2025-10-10T17:59:49.9344823Z Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
2025-10-10T17:59:50.0522827Z Download action repository 'tj-actions/changed-files@v44' (SHA:2d756ea4c53f7f6b397767d8723b3a10a9f35bf2)
2025-10-10T17:59:50.8319471Z Download action repository 'actions/setup-node@v5.0.0' (SHA:a0853c24544627f65ddf259abe73b1d18a591444)
2025-10-10T17:59:51.1184977Z Complete job name: Extended Tests Matrix (22.x)
2025-10-10T17:59:51.2623176Z ##[group]Run actions/checkout@v4
2025-10-10T17:59:51.2624404Z with:
2025-10-10T17:59:51.2624871Z   fetch-depth: 0
2025-10-10T17:59:51.2625465Z   repository: skyoxu/gametp
2025-10-10T17:59:51.2626288Z   token: ***
2025-10-10T17:59:51.2626798Z   ssh-strict: true
2025-10-10T17:59:51.2627331Z   ssh-user: git
2025-10-10T17:59:51.2627898Z   persist-credentials: true
2025-10-10T17:59:51.2628513Z   clean: true
2025-10-10T17:59:51.2629041Z   sparse-checkout-cone-mode: true
2025-10-10T17:59:51.2629738Z   fetch-tags: false
2025-10-10T17:59:51.2630268Z   show-progress: true
2025-10-10T17:59:51.2630838Z   lfs: false
2025-10-10T17:59:51.2631304Z   submodules: false
2025-10-10T17:59:51.2631877Z   set-safe-directory: true
2025-10-10T17:59:51.2632659Z env:
2025-10-10T17:59:51.2633185Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T17:59:51.2633906Z   COVERAGE_THRESHOLD: 90
2025-10-10T17:59:51.2634470Z   SENTRY_DSN: 
2025-10-10T17:59:51.2635086Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T17:59:51.2635726Z   CL: /std:c++20 /EHsc
2025-10-10T17:59:51.2636332Z   CXXFLAGS: -std=c++20
2025-10-10T17:59:51.2636892Z   NODE_ENV: development
2025-10-10T17:59:51.2637921Z   NPM_CONFIG_PRODUCTION: false
2025-10-10T17:59:51.2638563Z ##[endgroup]
2025-10-10T17:59:51.4352285Z Syncing repository: skyoxu/gametp
2025-10-10T17:59:51.4354347Z ##[group]Getting Git version info
2025-10-10T17:59:51.4355225Z Working directory is 'D:\a\gametp\gametp'
2025-10-10T17:59:51.5291811Z [command]"C:\Program Files\Git\bin\git.exe" version
2025-10-10T17:59:51.7023716Z git version 2.51.0.windows.2
2025-10-10T17:59:51.7077286Z ##[endgroup]
2025-10-10T17:59:51.7098316Z Temporarily overriding HOME='D:\a\_temp\683512ac-1743-4c57-be5e-f842f00a2ca6' before making global git config changes
2025-10-10T17:59:51.7100220Z Adding repository directory to the temporary git global config as a safe directory
2025-10-10T17:59:51.7109432Z [command]"C:\Program Files\Git\bin\git.exe" config --global --add safe.directory D:\a\gametp\gametp
2025-10-10T17:59:51.7442299Z Deleting the contents of 'D:\a\gametp\gametp'
2025-10-10T17:59:51.7449058Z ##[group]Initializing the repository
2025-10-10T17:59:51.7459114Z [command]"C:\Program Files\Git\bin\git.exe" init D:\a\gametp\gametp
2025-10-10T17:59:51.8324663Z Initialized empty Git repository in D:/a/gametp/gametp/.git/
2025-10-10T17:59:51.8373830Z [command]"C:\Program Files\Git\bin\git.exe" remote add origin https://github.com/skyoxu/gametp
2025-10-10T17:59:51.8698285Z ##[endgroup]
2025-10-10T17:59:51.8699475Z ##[group]Disabling automatic garbage collection
2025-10-10T17:59:51.8707813Z [command]"C:\Program Files\Git\bin\git.exe" config --local gc.auto 0
2025-10-10T17:59:51.8986791Z ##[endgroup]
2025-10-10T17:59:51.8987730Z ##[group]Setting up auth
2025-10-10T17:59:51.9000970Z [command]"C:\Program Files\Git\bin\git.exe" config --local --name-only --get-regexp core\.sshCommand
2025-10-10T17:59:51.9296487Z [command]"C:\Program Files\Git\bin\git.exe" submodule foreach --recursive "sh -c \"git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :\""
2025-10-10T17:59:52.9373723Z [command]"C:\Program Files\Git\bin\git.exe" config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-10T17:59:52.9653744Z [command]"C:\Program Files\Git\bin\git.exe" submodule foreach --recursive "sh -c \"git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :\""
2025-10-10T17:59:53.4789581Z [command]"C:\Program Files\Git\bin\git.exe" config --local http.https://github.com/.extraheader "AUTHORIZATION: basic ***"
2025-10-10T17:59:53.5092893Z ##[endgroup]
2025-10-10T17:59:53.5095003Z ##[group]Fetching the repository
2025-10-10T17:59:53.5113936Z [command]"C:\Program Files\Git\bin\git.exe" -c protocol.version=2 fetch --prune --no-recurse-submodules origin +refs/heads/*:refs/remotes/origin/* +refs/tags/*:refs/tags/* +85364ba3c0f934311a801d515253203df8a6770b:refs/remotes/pull/13/merge
2025-10-10T17:59:55.1487233Z From https://github.com/skyoxu/gametp
2025-10-10T17:59:55.1488804Z  * [new branch]      dependabot/npm_and_yarn/brave/brave-search-mcp-server-2.0.54 -> origin/dependabot/npm_and_yarn/brave/brave-search-mcp-server-2.0.54
2025-10-10T17:59:55.1491555Z  * [new branch]      dependabot/npm_and_yarn/commitlint/cli-20.1.0 -> origin/dependabot/npm_and_yarn/commitlint/cli-20.1.0
2025-10-10T17:59:55.1493489Z  * [new branch]      dependabot/npm_and_yarn/eslint-plugin-react-refresh-0.4.23 -> origin/dependabot/npm_and_yarn/eslint-plugin-react-refresh-0.4.23
2025-10-10T17:59:55.1495251Z  * [new branch]      dependabot/npm_and_yarn/multi-1d6e8a99d3 -> origin/dependabot/npm_and_yarn/multi-1d6e8a99d3
2025-10-10T17:59:55.1496695Z  * [new branch]      dependabot/npm_and_yarn/multi-dcae87122d -> origin/dependabot/npm_and_yarn/multi-dcae87122d
2025-10-10T17:59:55.1498306Z  * [new branch]      dependabot/npm_and_yarn/playwright/test-1.56.0 -> origin/dependabot/npm_and_yarn/playwright/test-1.56.0
2025-10-10T17:59:55.1499931Z  * [new branch]      dependabot/npm_and_yarn/size-limit/file-11.2.0 -> origin/dependabot/npm_and_yarn/size-limit/file-11.2.0
2025-10-10T17:59:55.1501171Z  * [new branch]      dependabot/npm_and_yarn/snyk-1.1299.1    -> origin/dependabot/npm_and_yarn/snyk-1.1299.1
2025-10-10T17:59:55.1501976Z  * [new branch]      dependabot/npm_and_yarn/tsx-4.20.6       -> origin/dependabot/npm_and_yarn/tsx-4.20.6
2025-10-10T17:59:55.1502710Z  * [new branch]      dependabot/npm_and_yarn/typescript-5.9.3 -> origin/dependabot/npm_and_yarn/typescript-5.9.3
2025-10-10T17:59:55.1503640Z  * [new branch]      dependabot/npm_and_yarn/vitejs/plugin-react-5.0.4 -> origin/dependabot/npm_and_yarn/vitejs/plugin-react-5.0.4
2025-10-10T17:59:55.1504423Z  * [new branch]      dependabot/snyk-1.1299.1                 -> origin/dependabot/snyk-1.1299.1
2025-10-10T17:59:55.1505008Z  * [new branch]      main                                     -> origin/main
2025-10-10T17:59:55.1506501Z  * [new branch]      snyk-fix                                 -> origin/snyk-fix
2025-10-10T17:59:55.1507021Z  * [new ref]         85364ba3c0f934311a801d515253203df8a6770b -> pull/13/merge
2025-10-10T17:59:55.1690648Z ##[endgroup]
2025-10-10T17:59:55.1691180Z ##[group]Determining the checkout info
2025-10-10T17:59:55.1691889Z ##[endgroup]
2025-10-10T17:59:55.1703205Z [command]"C:\Program Files\Git\bin\git.exe" sparse-checkout disable
2025-10-10T17:59:55.2038778Z [command]"C:\Program Files\Git\bin\git.exe" config --local --unset-all extensions.worktreeConfig
2025-10-10T17:59:55.2323609Z ##[group]Checking out the ref
2025-10-10T17:59:55.2333292Z [command]"C:\Program Files\Git\bin\git.exe" checkout --progress --force refs/remotes/pull/13/merge
2025-10-10T17:59:55.4516590Z Note: switching to 'refs/remotes/pull/13/merge'.
2025-10-10T17:59:55.4517205Z 
2025-10-10T17:59:55.4517685Z You are in 'detached HEAD' state. You can look around, make experimental
2025-10-10T17:59:55.4518622Z changes and commit them, and you can discard any commits you make in this
2025-10-10T17:59:55.4519490Z state without impacting any branches by switching back to a branch.
2025-10-10T17:59:55.4519991Z 
2025-10-10T17:59:55.4520423Z If you want to create a new branch to retain commits you create, you may
2025-10-10T17:59:55.4521269Z do so (now or later) by using -c with the switch command. Example:
2025-10-10T17:59:55.4521785Z 
2025-10-10T17:59:55.4521987Z   git switch -c <new-branch-name>
2025-10-10T17:59:55.4522321Z 
2025-10-10T17:59:55.4522517Z Or undo this operation with:
2025-10-10T17:59:55.4522893Z 
2025-10-10T17:59:55.4523102Z   git switch -
2025-10-10T17:59:55.4523348Z 
2025-10-10T17:59:55.4523793Z Turn off this advice by setting config variable advice.detachedHead to false
2025-10-10T17:59:55.4524391Z 
2025-10-10T17:59:55.4525007Z HEAD is now at 85364ba Merge 8467edfa9037dae12b5d466b1c285af62d0e8c4d into e1a2702b992654c40fdf749cd29695642d416d4b
2025-10-10T17:59:55.4556834Z ##[endgroup]
2025-10-10T17:59:55.4907978Z [command]"C:\Program Files\Git\bin\git.exe" log -1 --format=%H
2025-10-10T17:59:55.5163456Z 85364ba3c0f934311a801d515253203df8a6770b
2025-10-10T17:59:55.5745248Z ##[group]Run tj-actions/changed-files@v44
2025-10-10T17:59:55.5745567Z with:
2025-10-10T17:59:55.5745955Z   files: src/**
tests/**
*.js
*.ts
*.json
package*.json
vite.config.*
tsconfig.json
*.config.js
*.config.ts

2025-10-10T17:59:55.5746385Z   files_ignore: docs/**
*.md
**/*.md

2025-10-10T17:59:55.5746607Z   separator:  
2025-10-10T17:59:55.5746783Z   include_all_old_new_renamed_files: false
2025-10-10T17:59:55.5747021Z   old_new_separator: ,
2025-10-10T17:59:55.5747201Z   old_new_files_separator:  
2025-10-10T17:59:55.5747411Z   files_from_source_file_separator: 

2025-10-10T17:59:55.5747624Z   files_separator: 

2025-10-10T17:59:55.5747817Z   files_yaml_from_source_file_separator: 

2025-10-10T17:59:55.5748079Z   files_ignore_yaml_from_source_file_separator: 

2025-10-10T17:59:55.5748351Z   files_ignore_separator: 

2025-10-10T17:59:55.5748567Z   files_ignore_from_source_file_separator: 

2025-10-10T17:59:55.5748788Z   path: .
2025-10-10T17:59:55.5748965Z   quotepath: true
2025-10-10T17:59:55.5749122Z   diff_relative: true
2025-10-10T17:59:55.5749289Z   dir_names: false
2025-10-10T17:59:55.5749461Z   dir_names_exclude_current_dir: false
2025-10-10T17:59:55.5749698Z   dir_names_include_files_separator: 

2025-10-10T17:59:55.5749968Z   dir_names_deleted_files_include_only_deleted_dirs: false
2025-10-10T17:59:55.5750235Z   json: false
2025-10-10T17:59:55.5750383Z   escape_json: true
2025-10-10T17:59:55.5750546Z   safe_output: true
2025-10-10T17:59:55.5750697Z   fetch_depth: 50
2025-10-10T17:59:55.5750861Z   skip_initial_fetch: false
2025-10-10T17:59:55.5751070Z   fetch_additional_submodule_history: false
2025-10-10T17:59:55.5751318Z   since_last_remote_commit: false
2025-10-10T17:59:55.5751532Z   write_output_files: false
2025-10-10T17:59:55.5751726Z   output_dir: .github/outputs
2025-10-10T17:59:55.5752148Z   output_renamed_files_as_deleted_and_added: false
2025-10-10T17:59:55.5752407Z   recover_deleted_files: false
2025-10-10T17:59:55.5752622Z   recover_files_separator: 

2025-10-10T17:59:55.5752886Z   recover_files_ignore_separator: 

2025-10-10T17:59:55.5753263Z   token: ***
2025-10-10T17:59:55.5753449Z   api_url: https://api.github.com
2025-10-10T17:59:55.5753670Z   use_rest_api: false
2025-10-10T17:59:55.5753862Z   fail_on_initial_diff_error: false
2025-10-10T17:59:55.5754089Z   fail_on_submodule_diff_error: false
2025-10-10T17:59:55.5754322Z   negation_patterns_first: false
2025-10-10T17:59:55.5754522Z   matrix: false
2025-10-10T17:59:55.5754670Z env:
2025-10-10T17:59:55.5754823Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T17:59:55.5755044Z   COVERAGE_THRESHOLD: 90
2025-10-10T17:59:55.5755226Z   SENTRY_DSN: 
2025-10-10T17:59:55.5755383Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T17:59:55.5755579Z   CL: /std:c++20 /EHsc
2025-10-10T17:59:55.5755752Z   CXXFLAGS: -std=c++20
2025-10-10T17:59:55.5755938Z   NODE_ENV: development
2025-10-10T17:59:55.5756115Z   NPM_CONFIG_PRODUCTION: false
2025-10-10T17:59:55.5756308Z ##[endgroup]
2025-10-10T17:59:55.7327231Z ##[group]changed-files
2025-10-10T17:59:55.8612758Z Using local .git directory
2025-10-10T17:59:56.9645020Z Running on a pull_request (synchronize) event...
2025-10-10T17:59:56.9654528Z Repository is shallow, fetching more history...
2025-10-10T17:59:56.9655171Z Completed fetching more history.
2025-10-10T17:59:57.7217485Z Retrieving changes between e1a2702b992654c40fdf749cd29695642d416d4b (main) → 8467edfa9037dae12b5d466b1c285af62d0e8c4d (dependabot/npm_and_yarn/snyk-1.1299.1)
2025-10-10T17:59:57.8298723Z All Done!
2025-10-10T17:59:57.8299525Z ##[endgroup]
2025-10-10T17:59:57.8301381Z ##[group]changed-files-patterns
2025-10-10T17:59:57.8521798Z All Done!
2025-10-10T17:59:57.8522298Z ##[endgroup]
2025-10-10T17:59:57.8834701Z ##[group]Run actions/setup-node@v5.0.0
2025-10-10T17:59:57.8835023Z with:
2025-10-10T17:59:57.8835183Z   node-version: 22.x
2025-10-10T17:59:57.8835368Z   cache: npm
2025-10-10T17:59:57.8835529Z   always-auth: false
2025-10-10T17:59:57.8835706Z   check-latest: false
2025-10-10T17:59:57.8836017Z   token: ***
2025-10-10T17:59:57.8836205Z   package-manager-cache: true
2025-10-10T17:59:57.8836405Z env:
2025-10-10T17:59:57.8836561Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T17:59:57.8836794Z   COVERAGE_THRESHOLD: 90
2025-10-10T17:59:57.8836978Z   SENTRY_DSN: 
2025-10-10T17:59:57.8837147Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T17:59:57.8837344Z   CL: /std:c++20 /EHsc
2025-10-10T17:59:57.8837523Z   CXXFLAGS: -std=c++20
2025-10-10T17:59:57.8837702Z   NODE_ENV: development
2025-10-10T17:59:57.8837893Z   NPM_CONFIG_PRODUCTION: false
2025-10-10T17:59:57.8838081Z ##[endgroup]
2025-10-10T17:59:58.0592226Z Found in cache @ C:\hostedtoolcache\windows\node\22.20.0\x64
2025-10-10T17:59:58.0600655Z (node:8596) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-10T17:59:58.0601350Z (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-10T17:59:58.0603917Z ##[group]Environment details
2025-10-10T18:00:04.3965827Z node: v22.20.0
2025-10-10T18:00:04.3966155Z npm: 10.9.3
2025-10-10T18:00:04.3966379Z yarn: 1.22.22
2025-10-10T18:00:04.3966859Z ##[endgroup]
2025-10-10T18:00:04.4726673Z [command]C:\Windows\system32\cmd.exe /D /S /C "C:\hostedtoolcache\windows\node\22.20.0\x64\npm.cmd config get cache"
2025-10-10T18:00:04.7374040Z npm warn config production Use `--omit=dev` instead.
2025-10-10T18:00:05.2383263Z C:\npm\cache
2025-10-10T18:00:05.7369938Z Cache hit for: node-cache-Windows-x64-npm-fc17fb8d376abc8248800f4e980364e44d85f17a5d262a0278bfbe6dc7cc9aee
2025-10-10T18:00:05.7513358Z (node:8596) [DEP0169] DeprecationWarning: `url.parse()` behavior is not standardized and prone to errors that have security implications. Use the WHATWG URL API instead. CVEs are not issued for `url.parse()` vulnerabilities.
2025-10-10T18:00:06.9556460Z Received 41943040 of 315413375 (13.3%), 39.6 MBs/sec
2025-10-10T18:00:07.9664525Z Received 159383552 of 315413375 (50.5%), 75.4 MBs/sec
2025-10-10T18:00:08.9886899Z Received 301989888 of 315413375 (95.7%), 94.6 MBs/sec
2025-10-10T18:00:09.1821264Z Received 315413375 of 315413375 (100.0%), 92.9 MBs/sec
2025-10-10T18:00:09.1825583Z Cache Size: ~301 MB (315413375 B)
2025-10-10T18:00:09.1917135Z [command]"C:\Program Files\Git\usr\bin\tar.exe" -xf D:/a/_temp/c904cb03-6883-40ee-900f-cf4699d83cbc/cache.tzst -P -C D:/a/gametp/gametp --force-local --use-compress-program "zstd -d"
2025-10-10T18:00:17.0715662Z Cache restored successfully
2025-10-10T18:00:17.0981993Z Cache restored from key: node-cache-Windows-x64-npm-fc17fb8d376abc8248800f4e980364e44d85f17a5d262a0278bfbe6dc7cc9aee
2025-10-10T18:00:17.1508157Z Prepare all required actions
2025-10-10T18:00:17.1583552Z ##[group]Run ./.github/actions/npm-install
2025-10-10T18:00:17.1583807Z with:
2025-10-10T18:00:17.1583985Z   node-version: 22.x
2025-10-10T18:00:17.1584171Z   working-directory: .
2025-10-10T18:00:17.1584338Z env:
2025-10-10T18:00:17.1584501Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T18:00:17.1584744Z   COVERAGE_THRESHOLD: 90
2025-10-10T18:00:17.1584928Z   SENTRY_DSN: 
2025-10-10T18:00:17.1585100Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T18:00:17.1585307Z   CL: /std:c++20 /EHsc
2025-10-10T18:00:17.1585483Z   CXXFLAGS: -std=c++20
2025-10-10T18:00:17.1585671Z   NODE_ENV: development
2025-10-10T18:00:17.1585865Z   NPM_CONFIG_PRODUCTION: false
2025-10-10T18:00:17.1586059Z ##[endgroup]
2025-10-10T18:00:17.1805589Z ##[group]Run Write-Host "Validating Node.js environment setup..."
2025-10-10T18:00:17.1806052Z [36;1mWrite-Host "Validating Node.js environment setup..."[0m
2025-10-10T18:00:17.1806500Z [36;1mif (-not (Get-Command node -ErrorAction SilentlyContinue)) {[0m
2025-10-10T18:00:17.1806936Z [36;1m  Write-Error "Node.js not found. Ensure actions/setup-node has run."[0m
2025-10-10T18:00:17.1807277Z [36;1m  exit 1[0m
2025-10-10T18:00:17.1807451Z [36;1m}[0m
2025-10-10T18:00:17.1807703Z [36;1mif (-not (Get-Command npm -ErrorAction SilentlyContinue)) {[0m
2025-10-10T18:00:17.1808858Z [36;1m  Write-Error "npm not found. Node.js installation may be incomplete."[0m
2025-10-10T18:00:17.1809222Z [36;1m  exit 1[0m
2025-10-10T18:00:17.1809389Z [36;1m}[0m
2025-10-10T18:00:17.1809625Z [36;1mWrite-Host ("Node.js version: {0}" -f (node --version))[0m
2025-10-10T18:00:17.1809996Z [36;1mWrite-Host ("npm version: {0}" -f (npm --version))[0m
2025-10-10T18:00:17.2296320Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-10-10T18:00:17.2296888Z env:
2025-10-10T18:00:17.2297135Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T18:00:17.2297381Z   COVERAGE_THRESHOLD: 90
2025-10-10T18:00:17.2297596Z   SENTRY_DSN: 
2025-10-10T18:00:17.2297767Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T18:00:17.2297980Z   CL: /std:c++20 /EHsc
2025-10-10T18:00:17.2298188Z   CXXFLAGS: -std=c++20
2025-10-10T18:00:17.2298373Z   NODE_ENV: development
2025-10-10T18:00:17.2298569Z   NPM_CONFIG_PRODUCTION: false
2025-10-10T18:00:17.2298775Z ##[endgroup]
2025-10-10T18:00:27.2068339Z Validating Node.js environment setup...
2025-10-10T18:00:27.3525280Z Node.js version: v22.20.0
2025-10-10T18:00:27.9407486Z npm warn config production Use `--omit=dev` instead.
2025-10-10T18:00:27.9733899Z npm version: 10.9.3
2025-10-10T18:00:28.3464024Z ##[group]Run Write-Host "Validating critical environment variables..."
2025-10-10T18:00:28.3464815Z [36;1mWrite-Host "Validating critical environment variables..."[0m
2025-10-10T18:00:28.3465273Z [36;1mWrite-Host ("NODE_ENV: {0}" -f ($env:NODE_ENV ?? 'not set'))[0m
2025-10-10T18:00:28.3465770Z [36;1mWrite-Host ("NPM_CONFIG_PRODUCTION: {0}" -f ($env:NPM_CONFIG_PRODUCTION ?? 'not set'))[0m
2025-10-10T18:00:28.3466321Z [36;1mif ($env:NODE_ENV -ne 'development' -or $env:NPM_CONFIG_PRODUCTION -ne 'false') {[0m
2025-10-10T18:00:28.3467863Z [36;1m  Write-Warning "Environment vars may prevent devDependencies installation. Recommended: NODE_ENV=development, NPM_CONFIG_PRODUCTION=false"[0m
2025-10-10T18:00:28.3468468Z [36;1m}[0m
2025-10-10T18:00:28.3527297Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-10-10T18:00:28.3527625Z env:
2025-10-10T18:00:28.3527804Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T18:00:28.3528037Z   COVERAGE_THRESHOLD: 90
2025-10-10T18:00:28.3528232Z   SENTRY_DSN: 
2025-10-10T18:00:28.3528411Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T18:00:28.3528624Z   CL: /std:c++20 /EHsc
2025-10-10T18:00:28.3528823Z   CXXFLAGS: -std=c++20
2025-10-10T18:00:28.3529024Z   NODE_ENV: development
2025-10-10T18:00:28.3529223Z   NPM_CONFIG_PRODUCTION: false
2025-10-10T18:00:28.3529437Z ##[endgroup]
2025-10-10T18:00:28.7248128Z Validating critical environment variables...
2025-10-10T18:00:28.7259232Z NODE_ENV: development
2025-10-10T18:00:28.7366880Z NPM_CONFIG_PRODUCTION: false
2025-10-10T18:00:28.8301577Z ##[group]Run Write-Host "Starting Windows-focused npm installation..."
2025-10-10T18:00:28.8302113Z [36;1mWrite-Host "Starting Windows-focused npm installation..."[0m
2025-10-10T18:00:28.8302503Z [36;1mWrite-Host ("Runner: {0}" -f $env:RUNNER_OS)[0m
2025-10-10T18:00:28.8302841Z [36;1mWrite-Host "Current npm configuration (subset):"[0m
2025-10-10T18:00:28.8303473Z [36;1mtry { npm config list | Select-String -Pattern 'fetch-retries|registry|fund|audit' -SimpleMatch | ForEach-Object { $_.Line } } catch {}[0m
2025-10-10T18:00:28.8304049Z [36;1m[0m
2025-10-10T18:00:28.8304248Z [36;1m# ESM-friendly npm environment variables[0m
2025-10-10T18:00:28.8304524Z [36;1m$env:NPM_CONFIG_MAXSOCKETS = '8'[0m
2025-10-10T18:00:28.8304863Z [36;1m$env:NPM_CONFIG_FUND = 'false'[0m
2025-10-10T18:00:28.8305250Z [36;1m$env:NPM_CONFIG_AUDIT = 'false'[0m
2025-10-10T18:00:28.8305502Z [36;1m$env:NPM_CONFIG_PROGRESS = 'false'[0m
2025-10-10T18:00:28.8305736Z [36;1m[0m
2025-10-10T18:00:28.8306004Z [36;1m$npmExecutable = (Get-Command npm -ErrorAction Stop).Source[0m
2025-10-10T18:00:28.8306343Z [36;1mif (-not $npmExecutable) {[0m
2025-10-10T18:00:28.8306659Z [36;1m  throw 'npm executable not found on PATH (required for npm ci)'[0m
2025-10-10T18:00:28.8306978Z [36;1m}[0m
2025-10-10T18:00:28.8307127Z [36;1m[0m
2025-10-10T18:00:28.8307404Z [36;1mfunction Invoke-NpmCiAttempt([int]$timeoutSec, [string]$extraArgs) {[0m
2025-10-10T18:00:28.8307846Z [36;1m  $psi = New-Object System.Diagnostics.ProcessStartInfo[0m
2025-10-10T18:00:28.8308166Z [36;1m  $psi.FileName = $npmExecutable[0m
2025-10-10T18:00:28.8308451Z [36;1m  $psi.WorkingDirectory = (Get-Location).Path[0m
2025-10-10T18:00:28.8308750Z [36;1m  $psi.Arguments = "ci $extraArgs"[0m
2025-10-10T18:00:28.8309031Z [36;1m  $psi.RedirectStandardOutput = $true[0m
2025-10-10T18:00:28.8309317Z [36;1m  $psi.RedirectStandardError = $true[0m
2025-10-10T18:00:28.8309583Z [36;1m  $psi.UseShellExecute = $false[0m
2025-10-10T18:00:28.8309841Z [36;1m  $psi.CreateNoWindow = $true[0m
2025-10-10T18:00:28.8310127Z [36;1m  $proc = New-Object System.Diagnostics.Process[0m
2025-10-10T18:00:28.8310450Z [36;1m  $proc.StartInfo = $psi[0m
2025-10-10T18:00:28.8310813Z [36;1m  [void]$proc.Start()[0m
2025-10-10T18:00:28.8311090Z [36;1m  $completed = $proc.WaitForExit($timeoutSec * 1000)[0m
2025-10-10T18:00:28.8311420Z [36;1m  $out = $proc.StandardOutput.ReadToEnd()[0m
2025-10-10T18:00:28.8311711Z [36;1m  $err = $proc.StandardError.ReadToEnd()[0m
2025-10-10T18:00:28.8312072Z [36;1m  ($out + $err) | Out-File -FilePath npm_install.log -Append -Encoding UTF8[0m
2025-10-10T18:00:28.8312767Z [36;1m  if (-not $completed) { try { Stop-Process -Id $proc.Id -Force -ErrorAction SilentlyContinue } catch {}; return @{ Ok=$false; TimedOut=$true; Code=-1 } }[0m
2025-10-10T18:00:28.8313461Z [36;1m  return @{ Ok = ($proc.ExitCode -eq 0); TimedOut=$false; Code=$proc.ExitCode }[0m
2025-10-10T18:00:28.8313800Z [36;1m}[0m
2025-10-10T18:00:28.8314153Z [36;1m[0m
2025-10-10T18:00:28.8314302Z [36;1m$attempts = @([0m
2025-10-10T18:00:28.8314504Z [36;1m  @{ Timeout=480; Args='' },[0m
2025-10-10T18:00:28.8314759Z [36;1m  @{ Timeout=720; Args='--maxsockets=5' },[0m
2025-10-10T18:00:28.8315028Z [36;1m  @{ Timeout=900; Args='--maxsockets=1' },[0m
2025-10-10T18:00:28.8315277Z [36;1m  @{ Timeout=900; Args='' }[0m
2025-10-10T18:00:28.8315493Z [36;1m)[0m
2025-10-10T18:00:28.8315632Z [36;1m[0m
2025-10-10T18:00:28.8315783Z [36;1m$success = $false[0m
2025-10-10T18:00:28.8316432Z [36;1mfor ($i=0; $i -lt $attempts.Count; $i++) {[0m
2025-10-10T18:00:28.8316735Z [36;1m  $a = $attempts[$i][0m
2025-10-10T18:00:28.8317079Z [36;1m  Write-Host ("Attempt {0} (timeout={1}s args='{2}')" -f ($i+1), $a.Timeout, $a.Args)[0m
2025-10-10T18:00:28.8318347Z [36;1m  $res = Invoke-NpmCiAttempt -timeoutSec $a.Timeout -extraArgs $a.Args[0m
2025-10-10T18:00:28.8319066Z [36;1m  if ($res.Ok) { $success = $true; break } else {[0m
2025-10-10T18:00:28.8319554Z [36;1m    if ($i -lt ($attempts.Count-1)) {[0m
2025-10-10T18:00:28.8319976Z [36;1m      $sleep = 15 * ($i+1)[0m
2025-10-10T18:00:28.8320816Z [36;1m      Write-Warning ("Attempt {0} failed (code={1}, timeout={2}). Sleeping {3}s before retry..." -f ($i+1), $res.Code, $res.TimedOut, $sleep)[0m
2025-10-10T18:00:28.8321556Z [36;1m      Start-Sleep -Seconds $sleep[0m
2025-10-10T18:00:28.8321852Z [36;1m    }[0m
2025-10-10T18:00:28.8322131Z [36;1m  }[0m
2025-10-10T18:00:28.8322290Z [36;1m}[0m
2025-10-10T18:00:28.8322429Z [36;1m[0m
2025-10-10T18:00:28.8322583Z [36;1mif (-not $success) {[0m
2025-10-10T18:00:28.8322926Z [36;1m  Write-Error "CRITICAL FAILURE: All Windows installation attempts failed!"[0m
2025-10-10T18:00:28.8323445Z [36;1m  if (Test-Path npm_install.log) { Get-Content npm_install.log -Tail 80 | Write-Host }[0m
2025-10-10T18:00:28.8323830Z [36;1m  exit 1[0m
2025-10-10T18:00:28.8324060Z [36;1m}[0m
2025-10-10T18:00:28.8324216Z [36;1m[0m
2025-10-10T18:00:28.8324407Z [36;1mWrite-Host "SUCCESS: npm ci completed"[0m
2025-10-10T18:00:28.8324644Z [36;1m[0m
2025-10-10T18:00:28.8324800Z [36;1m# Verification[0m
2025-10-10T18:00:28.8325003Z [36;1m$verificationErrors = 0[0m
2025-10-10T18:00:28.8325287Z [36;1m$tools = @('eslint','tsc','vitest','playwright','tsx')[0m
2025-10-10T18:00:28.8325577Z [36;1mforeach ($t in $tools) {[0m
2025-10-10T18:00:28.8325838Z [36;1m  $binPath = Join-Path 'node_modules/.bin' $t[0m
2025-10-10T18:00:28.8326194Z [36;1m  $binCmdPath = Join-Path 'node_modules/.bin' ("{0}.cmd" -f $t)[0m
2025-10-10T18:00:28.8326522Z [36;1m  $hasTool = Test-Path $binPath[0m
2025-10-10T18:00:28.8326755Z [36;1m  if (-not $hasTool) {[0m
2025-10-10T18:00:28.8326990Z [36;1m    $hasTool = Test-Path $binCmdPath[0m
2025-10-10T18:00:28.8327231Z [36;1m  }[0m
2025-10-10T18:00:28.8327385Z [36;1m  if ($hasTool) {[0m
2025-10-10T18:00:28.8327845Z [36;1m    Write-Host ("SUCCESS: {0} available in node_modules/.bin" -f $t)[0m
2025-10-10T18:00:28.8328235Z [36;1m  } elseif ((npm list $t | Out-Null) -ne $true) {[0m
2025-10-10T18:00:28.8328582Z [36;1m    Write-Warning ("{0} not detected in node_modules" -f $t)[0m
2025-10-10T18:00:28.8328898Z [36;1m    $verificationErrors++[0m
2025-10-10T18:00:28.8329115Z [36;1m  }[0m
2025-10-10T18:00:28.8329260Z [36;1m}[0m
2025-10-10T18:00:28.8329405Z [36;1m[0m
2025-10-10T18:00:28.8329680Z [36;1mWrite-Host "Verifying Rollup native platform package for Windows..."[0m
2025-10-10T18:00:28.8330106Z [36;1mnode -e "require('@rollup/rollup-win32-x64-msvc')" 2>$null[0m
2025-10-10T18:00:28.8330723Z [36;1mif ($LASTEXITCODE -eq 0) { Write-Host "SUCCESS: rollup native ok" } else { Write-Warning "rollup native package not found (non-critical)" }[0m
2025-10-10T18:00:28.8331259Z [36;1m[0m
2025-10-10T18:00:28.8331459Z [36;1m$hasNodeModules = Test-Path 'node_modules'[0m
2025-10-10T18:00:28.8331786Z [36;1m$hasNodeModulesBin = Test-Path 'node_modules/.bin'[0m
2025-10-10T18:00:28.8332286Z [36;1mif ($hasNodeModules -and $hasNodeModulesBin) {[0m
2025-10-10T18:00:28.8332690Z [36;1m  $pkgCount = (Get-ChildItem 'node_modules' -Directory | Measure-Object).Count[0m
2025-10-10T18:00:28.8333259Z [36;1m  Write-Host ("SUCCESS: node_modules verification passed ({0} top-level packages)" -f $pkgCount)[0m
2025-10-10T18:00:28.8333677Z [36;1m} else {[0m
2025-10-10T18:00:28.8333924Z [36;1m  Write-Error 'node_modules structure verification failed'[0m
2025-10-10T18:00:28.8334242Z [36;1m  $verificationErrors++[0m
2025-10-10T18:00:28.8334452Z [36;1m}[0m
2025-10-10T18:00:28.8334593Z [36;1m[0m
2025-10-10T18:00:28.8334732Z [36;1mtry {[0m
2025-10-10T18:00:28.8334968Z [36;1m  $pkg = Get-Content package.json -Raw | ConvertFrom-Json[0m
2025-10-10T18:00:28.8335493Z [36;1m  if ($pkg.type -eq 'module') { Write-Host 'SUCCESS: ESM module system verification passed' }[0m
2025-10-10T18:00:28.8335883Z [36;1m} catch {}[0m
2025-10-10T18:00:28.8336338Z [36;1m[0m
2025-10-10T18:00:28.8336818Z [36;1mif ($verificationErrors -gt 0) { Write-Warning ("Found {0} verification issues (non-blocking)" -f $verificationErrors) }[0m
2025-10-10T18:00:28.8397588Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-10-10T18:00:28.8397916Z env:
2025-10-10T18:00:28.8398080Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T18:00:28.8398322Z   COVERAGE_THRESHOLD: 90
2025-10-10T18:00:28.8398520Z   SENTRY_DSN: 
2025-10-10T18:00:28.8398690Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T18:00:28.8398898Z   CL: /std:c++20 /EHsc
2025-10-10T18:00:28.8399081Z   CXXFLAGS: -std=c++20
2025-10-10T18:00:28.8399267Z   NODE_ENV: development
2025-10-10T18:00:28.8399456Z   NPM_CONFIG_PRODUCTION: false
2025-10-10T18:00:28.8399666Z ##[endgroup]
2025-10-10T18:00:29.3263834Z Starting Windows-focused npm installation...
2025-10-10T18:00:29.3272687Z Runner: Windows
2025-10-10T18:00:29.3278249Z Current npm configuration (subset):
2025-10-10T18:00:29.6779861Z npm warn config production Use `--omit=dev` instead.
2025-10-10T18:00:29.7623839Z Attempt 1 (timeout=480s args='')
2025-10-10T18:00:30.1696941Z [31;1mParentContainsErrorRecordException: [0mD:\a\_temp\416a7e15-fe73-4daa-9a9d-30c066d8f903.ps1:29[0m
2025-10-10T18:00:30.1698368Z [31;1m[0m[36;1mLine |[0m
2025-10-10T18:00:30.1699491Z [31;1m[0m[36;1m[36;1m  29 | [0m   [36;1m[void]$proc.Start()[0m
2025-10-10T18:00:30.1700251Z [31;1m[0m[36;1m[36;1m[0m[36;1m[0m[36;1m     | [31;1m   ~~~~~~~~~~~~~~~~~~~[0m
2025-10-10T18:00:30.1701192Z [31;1m[0m[36;1m[36;1m[0m[36;1m[0m[36;1m[31;1m[31;1m[36;1m     | [31;1mException calling "Start" with "0" argument(s): "An error occurred trying to start process[0m
2025-10-10T18:00:30.1702844Z [31;1m[0m[36;1m[36;1m[0m[36;1m[0m[36;1m[31;1m[31;1m[36;1m[31;1m[36;1m     | [31;1m'C:\hostedtoolcache\windows\node\22.20.0\x64\npm.ps1' with working directory 'D:\a\gametp\gametp'. The specified[0m
2025-10-10T18:00:30.1704366Z [31;1m[0m[36;1m[36;1m[0m[36;1m[0m[36;1m[31;1m[31;1m[36;1m[31;1m[36;1m[31;1m[36;1m     | [31;1mexecutable is not a valid application for this OS platform."[0m
2025-10-10T18:00:30.2305237Z ##[error]Process completed with exit code 1.
2025-10-10T18:00:30.2528165Z Post job cleanup.
2025-10-10T18:00:30.5191157Z [command]"C:\Program Files\Git\bin\git.exe" version
2025-10-10T18:00:30.5502211Z git version 2.51.0.windows.2
2025-10-10T18:00:30.5582478Z Copying 'C:\Users\runneradmin\.gitconfig' to 'D:\a\_temp\99ff0c88-b7b8-4fd1-9412-9b12e5be9d61\.gitconfig'
2025-10-10T18:00:30.5605927Z Temporarily overriding HOME='D:\a\_temp\99ff0c88-b7b8-4fd1-9412-9b12e5be9d61' before making global git config changes
2025-10-10T18:00:30.5607727Z Adding repository directory to the temporary git global config as a safe directory
2025-10-10T18:00:30.5617041Z [command]"C:\Program Files\Git\bin\git.exe" config --global --add safe.directory D:\a\gametp\gametp
2025-10-10T18:00:30.5947089Z [command]"C:\Program Files\Git\bin\git.exe" config --local --name-only --get-regexp core\.sshCommand
2025-10-10T18:00:30.6272748Z [command]"C:\Program Files\Git\bin\git.exe" submodule foreach --recursive "sh -c \"git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :\""
2025-10-10T18:00:31.2039329Z [command]"C:\Program Files\Git\bin\git.exe" config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-10T18:00:31.2325617Z http.https://github.com/.extraheader
2025-10-10T18:00:31.2375888Z [command]"C:\Program Files\Git\bin\git.exe" config --local --unset-all http.https://github.com/.extraheader
2025-10-10T18:00:31.2699679Z [command]"C:\Program Files\Git\bin\git.exe" submodule foreach --recursive "sh -c \"git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :\""
2025-10-10T18:00:31.8399259Z Cleaning up orphan processes
