2025-10-10T17:12:08.3346134Z Prepare all required actions
2025-10-10T17:12:08.3433926Z ##[group]Run ./.github/actions/run-tests
2025-10-10T17:12:08.3434332Z with:
2025-10-10T17:12:08.3434602Z   test-type: observability
2025-10-10T17:12:08.3434942Z   timeout: 300000
2025-10-10T17:12:08.3435225Z   fail-fast: true
2025-10-10T17:12:08.3435499Z   reporter: default
2025-10-10T17:12:08.3435770Z env:
2025-10-10T17:12:08.3436025Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T17:12:08.3436407Z   COVERAGE_THRESHOLD: 90
2025-10-10T17:12:08.3436720Z   SENTRY_DSN: 
2025-10-10T17:12:08.3437006Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T17:12:08.3437340Z   CL: /std:c++20 /EHsc
2025-10-10T17:12:08.3437650Z   CXXFLAGS: -std=c++20
2025-10-10T17:12:08.3437941Z ##[endgroup]
2025-10-10T17:12:08.3590809Z ##[group]Run node scripts/ci/run-tests.mjs --test-type "observability" --timeout "300000" --fail-fast "true" --reporter "default" --output-file ""
2025-10-10T17:12:08.3591657Z [36;1mnode scripts/ci/run-tests.mjs --test-type "observability" --timeout "300000" --fail-fast "true" --reporter "default" --output-file ""[0m
2025-10-10T17:12:08.3652464Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-10-10T17:12:08.3652803Z env:
2025-10-10T17:12:08.3652985Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T17:12:08.3653224Z   COVERAGE_THRESHOLD: 90
2025-10-10T17:12:08.3653419Z   SENTRY_DSN: 
2025-10-10T17:12:08.3653599Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T17:12:08.3653822Z   CL: /std:c++20 /EHsc
2025-10-10T17:12:08.3654004Z   CXXFLAGS: -std=c++20
2025-10-10T17:12:08.3654184Z ##[endgroup]
2025-10-10T17:12:08.6637635Z [run-tests] Start type=observability
2025-10-10T17:12:08.6641609Z [run-tests] Timeout=300000ms, FailFast=true, Reporter=default
2025-10-10T17:12:08.6643346Z [run-tests] Executing: npm run observability:test
2025-10-10T17:12:09.0972550Z 
2025-10-10T17:12:09.0973051Z > gametp@0.1.0 observability:test
2025-10-10T17:12:09.0973731Z > node scripts/verify-observability.js
2025-10-10T17:12:09.0974094Z 
2025-10-10T17:12:09.0974692Z 🔍 开始可观测性系统验证...
2025-10-10T17:12:09.0975132Z 📁 验证文件结构...
2025-10-10T17:12:09.0975483Z ⚙️ 验证配置文件...
2025-10-10T17:12:09.0975859Z 🌍 验证环境变量...
2025-10-10T17:12:09.0976201Z 📦 验证依赖...
2025-10-10T17:12:09.0976689Z 🔧 验证基础功能...
2025-10-10T17:12:09.0977081Z 🔒 验证安全配置...
2025-10-10T17:12:09.0977246Z 
2025-10-10T17:12:09.0977466Z 📊 === 可观测性系统验证结果 ===
2025-10-10T17:12:09.0977986Z 🕐 验证时间: 2025-10-10T17:12:09.061Z
2025-10-10T17:12:09.0978709Z 📈 总分: 85/100 (B级)
2025-10-10T17:12:09.0979099Z ✅ 成功: 23/27
2025-10-10T17:12:09.0979441Z ❌ 失败: 4/27
2025-10-10T17:12:09.0979747Z 🎯 结果: 通过
2025-10-10T17:12:09.0979913Z 
2025-10-10T17:12:09.0980115Z 📋 检查详情:
2025-10-10T17:12:09.0980572Z   ✅ 必需文件: src/shared/observability/sentry-main.ts
2025-10-10T17:12:09.0981381Z   ✅ 必需文件: src/shared/observability/sentry-renderer.ts
2025-10-10T17:12:09.0981786Z   ✅ 必需文件: src/shared/observability/sentry-detector.ts
2025-10-10T17:12:09.0982188Z   ✅ 必需文件: src/shared/observability/sentry-main-detector.ts
2025-10-10T17:12:09.0982612Z   ✅ 必需文件: src/shared/observability/config-validator.ts
2025-10-10T17:12:09.0983020Z   ✅ 必需文件: src/shared/observability/logging-health-checker.ts
2025-10-10T17:12:09.0983506Z   ✅ 必需文件: src/shared/observability/observability-gatekeeper.ts
2025-10-10T17:12:09.0984265Z   ✅ 必需文件: src/shared/observability/resilience-manager.ts
2025-10-10T17:12:09.0984963Z   ✅ 必需目录: src/shared/observability
2025-10-10T17:12:09.0985399Z   ✅ 必需目录: logs
2025-10-10T17:12:09.0985750Z   ✅ 必需目录: .github/workflows
2025-10-10T17:12:09.0986192Z   ✅ package.json Sentry依赖
2025-10-10T17:12:09.0986622Z   ✅ package.json 测试脚本
2025-10-10T17:12:09.0986930Z   ✅ TypeScript配置
2025-10-10T17:12:09.0987263Z   ❌ .env.example 配置
2025-10-10T17:12:09.0987663Z      错误: 缺少必要的环境变量模板
2025-10-10T17:12:09.0988391Z   ❌ 环境变量: NODE_ENV
2025-10-10T17:12:09.0988777Z      错误: 必需的环境变量未设置
2025-10-10T17:12:09.0989114Z   ❌ 可选环境变量覆盖率
2025-10-10T17:12:09.0989539Z      错误: 建议设置更多可选环境变量
2025-10-10T17:12:09.0989944Z   ✅ node_modules 安装
2025-10-10T17:12:09.0992640Z   ✅ 依赖: @sentry/electron
2025-10-10T17:12:09.0992894Z   ✅ 依赖: @sentry/node
2025-10-10T17:12:09.0993111Z   ✅ 依赖: @sentry/browser
2025-10-10T17:12:09.0993407Z   ✅ 依赖: typescript
2025-10-10T17:12:09.0993786Z   ✅ JSON序列化/反序列化
2025-10-10T17:12:09.0994011Z   ✅ 文件系统读写
2025-10-10T17:12:09.0994222Z   ✅ 内存使用检查
2025-10-10T17:12:09.0994408Z   ✅ .gitignore 安全配置
2025-10-10T17:12:09.0994629Z   ❌ 硬编码密钥检查
2025-10-10T17:12:09.0994845Z      错误: 发现可疑的硬编码密钥: 2处
2025-10-10T17:12:09.0994965Z 
2025-10-10T17:12:09.0995065Z 💡 建议:
2025-10-10T17:12:09.0995291Z   ✅ 可观测性系统基本正常，建议优化剩余问题
2025-10-10T17:12:09.0995522Z   📋 请优先修复以下错误:
2025-10-10T17:12:09.0995798Z      - .env.example 配置: 缺少必要的环境变量模板
2025-10-10T17:12:09.0996109Z      - 环境变量: NODE_ENV: 必需的环境变量未设置
2025-10-10T17:12:09.0996424Z      - 可选环境变量覆盖率: 建议设置更多可选环境变量
2025-10-10T17:12:09.0996697Z      - 硬编码密钥检查: 发现可疑的硬编码密钥: 2处
2025-10-10T17:12:09.0996954Z ==================================================
2025-10-10T17:12:09.0997127Z 
2025-10-10T17:12:09.0997429Z 📄 验证结果已保存到: D:\a\gametp\gametp\logs\observability-verification.json
2025-10-10T17:12:09.0997852Z [run-tests] Completed: PASS
2025-10-10T17:12:09.2278859Z ##[group]Run if ('success' -eq 'success') {
2025-10-10T17:12:09.2279158Z [36;1mif ('success' -eq 'success') {[0m
2025-10-10T17:12:09.2279421Z [36;1m  Write-Host '[tests] Status: PASS'[0m
2025-10-10T17:12:09.2279658Z [36;1m} else {[0m
2025-10-10T17:12:09.2279841Z [36;1m  Write-Host '[tests] Status: FAIL'[0m
2025-10-10T17:12:09.2280063Z [36;1m}[0m
2025-10-10T17:12:09.2280222Z [36;1mif ('' -ne '') {[0m
2025-10-10T17:12:09.2280444Z [36;1m  Write-Host "[tests] Report path: "[0m
2025-10-10T17:12:09.2280669Z [36;1m}[0m
2025-10-10T17:12:09.2338147Z shell: C:\Program Files\PowerShell\7\pwsh.EXE -command ". '{0}'"
2025-10-10T17:12:09.2338493Z env:
2025-10-10T17:12:09.2338659Z   NODE_VERSION_MATRIX: 18.x, 20.x, 22.x
2025-10-10T17:12:09.2338893Z   COVERAGE_THRESHOLD: 90
2025-10-10T17:12:09.2339075Z   SENTRY_DSN: 
2025-10-10T17:12:09.2339267Z   SENTRY_TRACES_SAMPLE_RATE: 0
2025-10-10T17:12:09.2339473Z   CL: /std:c++20 /EHsc
2025-10-10T17:12:09.2339660Z   CXXFLAGS: -std=c++20
2025-10-10T17:12:09.2339837Z ##[endgroup]
2025-10-10T17:12:09.5172141Z [tests] Status: PASS
